import{_ as s,c as n,o as l,d as a}from"./app.cebf1889.js";const i=JSON.parse('{"title":"promise æœŸçº¦","description":"","frontmatter":{},"headers":[{"level":2,"title":"promise åŸºç¡€","slug":"promise-åŸºç¡€","link":"#promise-åŸºç¡€","children":[{"level":3,"title":"çŠ¶æ€æœº","slug":"çŠ¶æ€æœº","link":"#çŠ¶æ€æœº","children":[]},{"level":3,"title":"Promise.resolve()","slug":"promise-resolve","link":"#promise-resolve","children":[]},{"level":3,"title":"Promise.reject()","slug":"promise-reject","link":"#promise-reject","children":[]},{"level":3,"title":"åŒæ­¥/å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§","slug":"åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§","link":"#åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§","children":[]}]},{"level":2,"title":"æœŸçº¦çš„å®ä¾‹æ–¹æ³•","slug":"æœŸçº¦çš„å®ä¾‹æ–¹æ³•","link":"#æœŸçº¦çš„å®ä¾‹æ–¹æ³•","children":[{"level":3,"title":"Thenable æ¥å£","slug":"thenable-æ¥å£","link":"#thenable-æ¥å£","children":[]},{"level":3,"title":"Promise.prototype.then()","slug":"promise-prototype-then","link":"#promise-prototype-then","children":[]},{"level":3,"title":"Promise.prototype.catch()","slug":"promise-prototype-catch","link":"#promise-prototype-catch","children":[]},{"level":3,"title":"Promise.prototype.finally()","slug":"promise-prototype-finally","link":"#promise-prototype-finally","children":[]},{"level":3,"title":"éé‡å…¥æœŸçº¦æ–¹æ³•ï¼ˆæ‰§è¡Œé¡ºåºï¼‰","slug":"éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº","link":"#éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº","children":[]}]},{"level":2,"title":"æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ","slug":"æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ","link":"#æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ","children":[{"level":3,"title":"Promise.all()","slug":"promise-all","link":"#promise-all","children":[]},{"level":3,"title":"Promise.race()","slug":"promise-race","link":"#promise-race","children":[]}]},{"level":2,"title":"æœŸçº¦æ‰©å±•","slug":"æœŸçº¦æ‰©å±•","link":"#æœŸçº¦æ‰©å±•","children":[]}],"relativePath":"gemstone/Chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°/promise.md","lastUpdated":1677390444000}'),o={name:"gemstone/Chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°/promise.md"},p=a(`<p>æä¸€ä¸‹ <strong>ä»¥å¾€çš„ï¼ˆè¿‡æ—¶çš„ï¼‰</strong> å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼š<code>setTimeout()</code> å’Œ å›è°ƒå‡½æ•° ã€‚<br> âŒ <strong>ç¼ºç‚¹ï¼š</strong> éšç€ä»£ç è¶Šæ¥è¶Šå¤æ‚ï¼Œå›è°ƒç­–ç•¥æ˜¯<strong>ä¸å…·æœ‰æ‰©å±•æ€§</strong>çš„ã€‚<strong>â€œå›è°ƒåœ°ç‹±â€</strong> è¿™ä¸ªç§°å‘¼å¯è°“åè‡³å®å½’ ğŸ‘ã€‚åµŒå¥—å›è°ƒçš„ä»£ç ç»´æŠ¤èµ·æ¥å°±æ˜¯å™©æ¢¦ã€‚</p><hr><h1 id="promise-æœŸçº¦" tabindex="-1">promise æœŸçº¦ <a class="header-anchor" href="#promise-æœŸçº¦" aria-hidden="true">#</a></h1><p>éš¾åº¦ï¼šâ­ï¸â­ï¸â­ï¸</p><blockquote><p>ğŸ’Œ æœŸçº¦æ˜¯å¯¹<strong>å°šä¸å­˜åœ¨</strong>ç»“æœçš„ä¸€ä¸ªæ›¿èº«ã€‚</p></blockquote><p>ECMAScript 6 å¢åŠ äº†å¯¹ Promises/A+ è§„èŒƒçš„å®Œå–„æ”¯æŒï¼Œå³ <code>Promise</code> ç±»å‹ã€‚ä¸€ç»æ¨å‡ºï¼Œ<code>Promise</code> å°±å¤§å—æ¬¢è¿ï¼Œæˆä¸ºäº†<strong>ä¸»å¯¼æ€§çš„å¼‚æ­¥ç¼–ç¨‹æœºåˆ¶</strong>ã€‚æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ ES6 æœŸçº¦ï¼Œå¾ˆå¤šå…¶ä»–æµè§ˆå™¨ APIï¼ˆå¦‚<code>fetch()</code>å’Œ <code>Battery Status API</code>ï¼‰ä¹Ÿä»¥ <code>promise</code> ä¸ºåŸºç¡€ã€‚</p><h2 id="promise-åŸºç¡€" tabindex="-1">promise åŸºç¡€ <a class="header-anchor" href="#promise-åŸºç¡€" aria-hidden="true">#</a></h2><blockquote><p>ğŸ‘‰ å¦‚æœä½ ä¹‹å‰äº†è§£è¿‡ <code>promise</code> ï¼Œé‚£è¿™ä¸€èŠ‚å¯¹ä½ æ¥è¯´å…¶å®æ²¡å¤šå°‘æ–°çš„çŸ¥è¯†ã€‚ä½†æ˜¯æˆ‘å‘ç°ä¹¦ä¸­æœ‰å¾ˆå¤šè¯´æ³•æ˜¯æˆ‘ä¹‹å‰æ²¡è§è¿‡çš„ï¼Œä¹ä¸€çœ‹è§‰å¾—æ•…å¼„ç„è™šï¼Œä½†ä»”ç»†ç¢ç£¨ä¸€ä¸‹å°±å¯ä»¥å‘ç°è¿™äº›è¯­è¨€ç»„ç»‡å¾—å¾ˆç²¾å¦™ï¼Œæ˜¯æœ€ä¸€é’ˆè§è¡€çš„æè¿° ğŸ¥³ã€‚æ¯”èµ·å¸‚é¢ä¸Š åŠ å·¥è¿‡çš„ã€åƒç¯‡ä¸€å¾‹ çš„â€œæ°´æ–‡â€å¥½ä¸€ç™¾å€ã€‚</p></blockquote><h3 id="çŠ¶æ€æœº" tabindex="-1">çŠ¶æ€æœº <a class="header-anchor" href="#çŠ¶æ€æœº" aria-hidden="true">#</a></h3><p>æœŸçº¦æ˜¯ä¸€ä¸ª<strong>æœ‰çŠ¶æ€çš„å¯¹è±¡</strong>ï¼Œå¯èƒ½å¤„äºå¦‚ä¸‹ 3 ç§çŠ¶æ€ä¹‹ä¸€ï¼š</p><ul><li>å¾…å®šï¼ˆ<code>pending</code>ï¼‰</li><li>å…‘ç°ï¼ˆ<code>fulfilled</code>ï¼Œæœ‰æ—¶å€™ä¹Ÿç§°ä¸ºâ€œè§£å†³â€ï¼Œ<code>resolved</code>ï¼‰</li><li>æ‹’ç»ï¼ˆ<code>rejected</code>ï¼‰</li></ul><p>çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µä¸å†èµ˜è¿°ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>æœŸçº¦çš„çŠ¶æ€æ˜¯ç§æœ‰çš„</strong>ï¼Œä¸èƒ½ç›´æ¥é€šè¿‡ JavaScript æ£€æµ‹åˆ°ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ ¹æ®è¯»å–åˆ°çš„æœŸçº¦çŠ¶æ€ï¼Œä»¥åŒæ­¥æ–¹å¼å¤„ç†æœŸçº¦å¯¹è±¡ã€‚å¦å¤–ï¼ŒæœŸçº¦çš„çŠ¶æ€ä¹Ÿä¸èƒ½è¢«å¤–éƒ¨ JavaScript ä»£ç ä¿®æ”¹ã€‚è¿™ä¸ä¸èƒ½è¯»å–è¯¥çŠ¶æ€çš„åŸå› æ˜¯ä¸€æ ·çš„ï¼š<strong>æœŸçº¦æ•…æ„å°†å¼‚æ­¥è¡Œä¸ºå°è£…èµ·æ¥ï¼Œä»è€Œéš”ç¦»å¤–éƒ¨çš„åŒæ­¥ä»£ç </strong>ã€‚</p><h3 id="promise-resolve" tabindex="-1">Promise.resolve() <a class="header-anchor" href="#promise-resolve" aria-hidden="true">#</a></h3><p>ğŸŸ¢ ä½¿ç”¨è¿™ä¸ªé™æ€æ–¹æ³•ï¼Œå®é™…ä¸Šå¯ä»¥æŠŠä»»ä½•å€¼éƒ½<strong>è½¬æ¢ä¸ºä¸€ä¸ªæœŸçº¦</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å¤šä½™çš„å‚æ•°ä¼šå¿½ç•¥</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: 4</span></span>
<span class="line"></span></code></pre></div><p>ğŸ”´ å¯¹è¿™ä¸ªé™æ€æ–¹æ³•è€Œè¨€ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°<strong>æœ¬èº«æ˜¯ä¸€ä¸ªæœŸçº¦</strong>ï¼Œé‚£å®ƒçš„è¡Œä¸ºå°±ç±»ä¼¼äºä¸€ä¸ª<strong>ç©ºåŒ…è£…</strong>ã€‚å› æ­¤ï¼Œ<code>Promise.resolve() </code>å¯ä»¥è¯´æ˜¯ä¸€ä¸ª<strong>å¹‚ç­‰æ–¹æ³•</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(p))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(p)))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span></code></pre></div><blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Promise.resolve()</code> æ£€æµ‹åˆ°å‚æ•°æ˜¯ä¸€ä¸ª <code>promsie</code> å¯¹è±¡ä¹‹åï¼Œ<strong>åŸå°ä¸åŠ¨</strong>çš„è¿”å›è¿™ä¸ª <code>promsie</code> å¯¹è±¡ã€‚</p></blockquote><p>âš  æ³¨æ„ï¼Œè¿™ä¸ªé™æ€æ–¹æ³•èƒ½å¤Ÿ<strong>åŒ…è£…ä»»ä½•éæœŸçº¦å€¼</strong>ï¼ŒåŒ…æ‹¬<strong>é”™è¯¯å¯¹è±¡</strong>ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º<strong>è§£å†³çš„æœŸçº¦</strong>ã€‚å› æ­¤ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: Error: foo</span></span>
<span class="line"></span></code></pre></div><blockquote><p>å¦‚ä¸Šï¼Œé”™è¯¯å¯¹è±¡å…ˆè¢«è½¬æ¢æˆ<strong>çŠ¶æ€ä¸º <code>resolved</code> çš„æœŸçº¦</strong>ï¼Œç„¶åå¹‚ç­‰è¿”å›ã€‚æ‰€ä»¥æœ€åè¿”å›å€¼æ˜¯ä¸€ä¸ª <code>resolved</code> æœŸçº¦ï¼ˆåç›´è§‰ï¼‰ã€‚ä½†æ˜¯é”™è¯¯å¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡ï¼Œ<code>Promise.resolve()</code> è¿™æ ·åšä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p></blockquote><h3 id="promise-reject" tabindex="-1">Promise.reject() <a class="header-anchor" href="#promise-reject" aria-hidden="true">#</a></h3><p>ä¸ <code>Promise.resolve()</code>ç±»ä¼¼ï¼Œ<code>Promise.reject()</code>ä¼šå®ä¾‹åŒ–ä¸€ä¸ªæ‹’ç»çš„æœŸçº¦å¹¶æŠ›å‡ºä¸€ä¸ªå¼‚æ­¥é”™è¯¯ã€‚<br> â—ï¸ <strong>å…³é”®åœ¨äºï¼š</strong><code>Promise.reject()</code>å¹¶æ²¡æœ‰ç…§æ¬ <code>Promise.resolve()</code>çš„å¹‚ç­‰é€»è¾‘ã€‚å¦‚æœç»™å®ƒä¼ ä¸€ä¸ª<strong>æœŸçº¦å¯¹è±¡</strong>ï¼Œåˆ™è¿™ä¸ªæœŸçº¦ä¼šæˆä¸ºå®ƒ<strong>è¿”å›çš„æ‹’ç»æœŸçº¦çš„ç†ç”±</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise { &lt;rejected&gt; Promise { undefined } }</span></span>
<span class="line"></span></code></pre></div><br><p>å•°å—¦å‡ å¥ ğŸ™ƒï¼š<br> å°±æ–¹æ³•åç§°æ¥çœ‹ï¼Œç›´è§‰ä¸Šæˆ‘ä»¬ä¼šè®¤ä¸º <code>Promise.resolve()</code> å’Œ <code>Promise.reject()</code> çš„é€»è¾‘è®¾è®¡åº”è¯¥ä¸€æ ·ï¼Œå¯äº‹å®å¹¶éå¦‚æ­¤ã€‚å°±åƒä¸Šé¢æ‰€æ¼”ç¤ºçš„ï¼Œ<code>Promise.reject()</code> ä¸éµä»å¹‚ç­‰é€»è¾‘ï¼Œæ¢åš<code>Promise.resolve()</code>çš„è¯ï¼Œç»“æœä¼šæ˜¯è¿™æ ·ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise { undefined }</span></span>
<span class="line"></span></code></pre></div><h3 id="åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§" tabindex="-1">åŒæ­¥/å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§ <a class="header-anchor" href="#åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§" aria-hidden="true">#</a></h3><p>Promise çš„è®¾è®¡å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šå¯¼è‡´ä¸€ç§å®Œå…¨ä¸åŒäº JavaScript çš„è®¡ç®—æ¨¡å¼ã€‚ä¸‹é¢çš„ä¾‹å­å®Œç¾åœ°å±•ç¤ºäº†è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ç§æ¨¡å¼ä¸‹æŠ›å‡ºé”™è¯¯çš„æƒ…å½¢ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;">(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// Error: foo</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;">(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Uncaught (in promise) Error: bar</span></span>
<span class="line"></span></code></pre></div><p>ç¬¬ä¸€ä¸ª <code>try/catch</code> æŠ›å‡ºå¹¶æ•è·äº†é”™è¯¯ï¼Œç¬¬äºŒä¸ª <code>try/catch</code> æŠ›å‡ºé”™è¯¯å´æ²¡æœ‰æ•è·åˆ°ï¼Œæ˜¯å› ä¸ºå®ƒæ²¡æœ‰é€šè¿‡<strong>å¼‚æ­¥æ¨¡å¼</strong>æ•è·é”™è¯¯ã€‚</p><blockquote><p>ğŸ‘‰ ä»è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæœŸçº¦çœŸæ­£çš„å¼‚æ­¥ç‰¹æ€§ï¼šå®ƒä»¬æ˜¯åŒæ­¥å¯¹è±¡ï¼ˆåœ¨åŒæ­¥æ‰§è¡Œæ¨¡å¼ä¸­ä½¿ç”¨ï¼‰ï¼Œä½†ä¹Ÿæ˜¯å¼‚æ­¥æ‰§è¡Œæ¨¡å¼çš„åª’ä»‹ã€‚</p></blockquote><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œ<strong>æ‹’ç»æœŸçº¦çš„é”™è¯¯</strong>å¹¶æ²¡æœ‰æŠ›åˆ°æ‰§è¡Œ<strong>åŒæ­¥ä»£ç çš„çº¿ç¨‹</strong>é‡Œï¼Œè€Œæ˜¯é€šè¿‡æµè§ˆå™¨<strong>å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—</strong>æ¥å¤„ç†çš„ã€‚å› æ­¤ï¼Œ<code>try/catch</code> å—å¹¶ä¸èƒ½æ•è·è¯¥é”™è¯¯ã€‚<br></p><blockquote><p>âœ¨ ä»£ç ä¸€æ—¦å¼€å§‹ä»¥<strong>å¼‚æ­¥æ¨¡å¼</strong>æ‰§è¡Œï¼Œåˆ™<strong>å”¯ä¸€ä¸ä¹‹äº¤äº’çš„æ–¹å¼</strong>å°±æ˜¯ä½¿ç”¨å¼‚æ­¥ç»“æ„â€”â€”æ›´å…·ä½“åœ°è¯´ï¼Œå°±æ˜¯<strong>æœŸçº¦çš„æ–¹æ³•</strong>ã€‚</p></blockquote><h2 id="æœŸçº¦çš„å®ä¾‹æ–¹æ³•" tabindex="-1">æœŸçº¦çš„å®ä¾‹æ–¹æ³• <a class="header-anchor" href="#æœŸçº¦çš„å®ä¾‹æ–¹æ³•" aria-hidden="true">#</a></h2><p>ğŸŒ‰ æœŸçº¦å®ä¾‹çš„æ–¹æ³•æ˜¯è¿æ¥<strong>å¤–éƒ¨åŒæ­¥ä»£ç </strong>ä¸<strong>å†…éƒ¨å¼‚æ­¥ä»£ç </strong>ä¹‹é—´çš„æ¡¥æ¢ã€‚</p><h3 id="thenable-æ¥å£" tabindex="-1">Thenable æ¥å£ <a class="header-anchor" href="#thenable-æ¥å£" aria-hidden="true">#</a></h3><p>åœ¨ ECMAScript æš´éœ²çš„å¼‚æ­¥ç»“æ„ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>then()</code> æ–¹æ³•ã€‚</p><h3 id="promise-prototype-then" tabindex="-1">Promise.prototype.then() <a class="header-anchor" href="#promise-prototype-then" aria-hidden="true">#</a></h3><p>è¿™ä¸ª then()æ–¹æ³•æ¥æ”¶æœ€å¤šä¸¤ä¸ªå‚æ•°ï¼š<code>onResolved</code> å¤„ç†ç¨‹åºå’Œ <code>onRejected</code> å¤„ç†ç¨‹åºã€‚å› ä¸ºæœŸçº¦åªèƒ½è½¬æ¢ä¸ºæœ€ç»ˆçŠ¶æ€ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæ“ä½œä¸€å®šæ˜¯<strong>äº’æ–¥</strong>çš„ã€‚</p><p>â—ï¸ æ³¨æ„è¿”å›å€¼ï¼š<br> è¿™ä¸ªæ–°æœŸçº¦å®ä¾‹åŸºäº <code>onResovled</code> å¤„ç†ç¨‹åºçš„è¿”å›å€¼æ„å»ºã€‚æ¢å¥è¯è¯´ï¼Œè¯¥å¤„ç†ç¨‹åºçš„<strong>è¿”å›å€¼ä¼šé€šè¿‡ <code>Promise.resolve()</code> åŒ…è£…æ¥ç”Ÿæˆæ–°æœŸçº¦</strong>ã€‚</p><ul><li>å¦‚æœ<strong>æ²¡æœ‰æä¾›è¿™ä¸ªå¤„ç†ç¨‹åº</strong>ï¼Œåˆ™ <code>Promise.resolve()</code> å°±ä¼šåŒ…è£…ä¸Šä¸€ä¸ªæœŸçº¦è§£å†³ä¹‹åçš„å€¼ã€‚</li><li>å¦‚æœ<strong>æ²¡æœ‰æ˜¾å¼çš„è¿”å›è¯­å¥</strong>ï¼Œåˆ™ <code>Promise.resolve()</code>ä¼šåŒ…è£…é»˜è®¤çš„è¿”å›å€¼ <code>undefined</code>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è‹¥è°ƒç”¨ then()æ—¶ä¸ä¼ å¤„ç†ç¨‹åºï¼Œåˆ™åŸæ ·å‘åä¼ </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰æ˜¾å¼çš„è¿”å›è¯­å¥</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">no return</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: undefined</span></span>
<span class="line"></span></code></pre></div><ul><li>å¦‚æœ<strong>æœ‰æ˜¾å¼çš„è¿”å›å€¼</strong>ï¼Œåˆ™ <code>Promise.resolve()</code>ä¼šåŒ…è£…è¿™ä¸ªå€¼ï¼ˆä¸€èˆ¬æƒ…å†µï¼‰ï¼š</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p8 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p9 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Uncaught (in promise): undefined</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p8)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;pending&gt;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p9)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;rejected&gt;: undefined</span></span>
<span class="line"></span></code></pre></div><br><p>ğŸ‘‰ <code>onRejected</code> å¤„ç†ç¨‹åºä¹Ÿä¸ä¹‹ç±»ä¼¼ï¼š<code>onRejected</code> å¤„ç†ç¨‹åºè¿”å›çš„å€¼<strong>ä¹Ÿä¼šè¢« <code>Promise.resolve()</code>åŒ…è£…</strong>ã€‚</p><h3 id="promise-prototype-catch" tabindex="-1">Promise.prototype.catch() <a class="header-anchor" href="#promise-prototype-catch" aria-hidden="true">#</a></h3><p>è¿™ä¸ªæ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š<code>onRejected</code> å¤„ç†ç¨‹åºã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ª<strong>è¯­æ³•ç³–</strong>ğŸ­ï¼Œè°ƒç”¨å®ƒå°±ç›¸å½“äºè°ƒç”¨ <code>Promise.prototype. then(null, onRejected)</code>ã€‚</p><p><strong>è¿”å›å€¼ï¼š</strong> åœ¨è¿”å›æ–°æœŸçº¦å®ä¾‹æ–¹é¢ï¼Œ<code>Promise.prototype.catch()</code>çš„è¡Œä¸ºä¸ <code>Promise.prototype.then()</code>çš„ <code>onRejected</code> å¤„ç†ç¨‹åºæ˜¯ä¸€æ ·çš„ ğŸ¤—ã€‚</p><h3 id="promise-prototype-finally" tabindex="-1">Promise.prototype.finally() <a class="header-anchor" href="#promise-prototype-finally" aria-hidden="true">#</a></h3><p>è¿™ä¸ªæ–°æœŸçº¦å®ä¾‹ä¸åŒäº <code>then()</code>æˆ– <code>catch()</code>æ–¹å¼<strong>è¿”å›çš„å®ä¾‹</strong>ï¼ˆè¿”å›å€¼ï¼‰ã€‚å› ä¸º <code>onFinally</code> è¢«è®¾è®¡ä¸ºä¸€ä¸ª<strong>çŠ¶æ€æ— å…³</strong>çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒå°†è¡¨ç°ä¸º<strong>çˆ¶æœŸçº¦çš„ä¼ é€’</strong>ã€‚å¯¹äºå·²è§£å†³çŠ¶æ€å’Œè¢«æ‹’ç»çŠ¶æ€éƒ½æ˜¯å¦‚æ­¤ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è¿™é‡Œéƒ½ä¼šåŸæ ·åä¼ </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p4 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p5 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p6 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p7 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p8 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">qux</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p4)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p5)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p6)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p7)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p8)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"></span></code></pre></div><h3 id="éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº" tabindex="-1">éé‡å…¥æœŸçº¦æ–¹æ³•ï¼ˆæ‰§è¡Œé¡ºåºï¼‰ <a class="header-anchor" href="#éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº" aria-hidden="true">#</a></h3><p>å½“æœŸçº¦è¿›å…¥è½å®šçŠ¶æ€æ—¶ï¼Œä¸è¯¥çŠ¶æ€ç›¸å…³çš„å¤„ç†ç¨‹åºä»…ä»…ä¼šè¢«<strong>æ’æœŸ</strong>ï¼Œè€Œéç«‹å³æ‰§è¡Œã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åˆ›å»ºè§£å†³çš„æœŸçº¦</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ·»åŠ è§£å†³å¤„ç†ç¨‹åº</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›´è§‰ä¸Šï¼Œè¿™ä¸ªå¤„ç†ç¨‹åºä¼šç­‰æœŸçº¦ä¸€è§£å†³å°±æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">onResolved handler</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// åŒæ­¥è¾“å‡ºï¼Œè¯æ˜ then()å·²ç»è¿”å›</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å®é™…çš„è¾“å‡ºï¼š</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// onResolved handler</span></span>
<span class="line"></span></code></pre></div><p>éé‡å…¥é€‚ç”¨äº <code>onResolved/onRejected</code> å¤„ç†ç¨‹åºã€<code>catch()</code>å¤„ç†ç¨‹åºå’Œ <code>finally()</code>å¤„ç†ç¨‹åºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1.then() onResolved</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1.then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2.then() onRejected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2.then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3.catch() onRejected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3.catch() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p4 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4.finally() onFinally</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4.finally() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p1.then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p2.then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p3.catch() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p4.finally() returns</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p1.then() onResolved</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p2.then() onRejected</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p3.catch() onRejected</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p4.finally() onFinally</span></span>
<span class="line"></span></code></pre></div><blockquote><p>ç”¨è¿‡ <code>promise</code> çš„åŒå­¦åº”è¯¥å¯¹ä¸Šé¢çš„è¾“å‡ºç»“æœ<strong>ä¸ä¼šæ„Ÿåˆ°ä¸æ¯«æ„å¤–</strong>ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä»‹ç»ä¸€ä¸‹ <strong>â€œéé‡å…¥â€</strong> è¿™ä¸€æ¦‚å¿µã€‚</p></blockquote><h2 id="æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ" tabindex="-1">æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ <a class="header-anchor" href="#æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ" aria-hidden="true">#</a></h2><p>è®©æ¯ä¸ªæ‰§è¡Œå™¨éƒ½<strong>è¿”å›ä¸€ä¸ªæœŸçº¦å®ä¾‹</strong>ï¼Œè¿™æ ·å°±å¯ä»¥è®©æ¯ä¸ªåç»­æœŸçº¦éƒ½ç­‰å¾…ä¹‹å‰çš„æœŸçº¦ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸²è¡ŒåŒ–å¼‚æ­¥ä»»åŠ¡</strong>ã€‚æ¯”å¦‚ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·è®©æ¯ä¸ªæœŸçº¦åœ¨ä¸€å®šæ—¶é—´åè§£å†³ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p1 executorï¼ˆ1 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p2 executorï¼ˆ2 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p3 executorï¼ˆ3 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p4 executorï¼ˆ4 ç§’åï¼‰</span></span>
<span class="line"></span></code></pre></div><p>æ¯ä¸ªåç»­çš„å¤„ç†ç¨‹åºéƒ½ä¼š<strong>ç­‰å¾…å‰ä¸€ä¸ªæœŸçº¦è§£å†³</strong>ï¼Œç„¶å<strong>å®ä¾‹åŒ–ä¸€ä¸ªæ–°æœŸçº¦å¹¶è¿”å›å®ƒ</strong>ã€‚è¿™ç§ç»“æ„å¯ä»¥ç®€æ´åœ°å°†å¼‚æ­¥ä»»åŠ¡ä¸²è¡ŒåŒ–ï¼Œ<strong>è§£å†³ä¹‹å‰å›è°ƒåœ°ç‹±çš„éš¾é¢˜</strong>ğŸ‘ã€‚</p><h3 id="promise-all" tabindex="-1">Promise.all() <a class="header-anchor" href="#promise-all" aria-hidden="true">#</a></h3><p><code>Promise.all()</code>é™æ€æ–¹æ³•åˆ›å»ºçš„æœŸçº¦ä¼šåœ¨<strong>ä¸€ç»„æœŸçº¦å…¨éƒ¨è§£å†³ä¹‹åå†è§£å†³</strong>ã€‚è¿™ä¸ªé™æ€æ–¹æ³•æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼Œè¿”å›ä¸€ä¸ªæ–°æœŸçº¦ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ä¼šé€šè¿‡ Promise.resolve()è½¬æ¢ä¸ºæœŸçº¦</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç©ºçš„å¯è¿­ä»£å¯¹è±¡ç­‰ä»·äº Promise.resolve()</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªåŒ…å«çš„æœŸçº¦<strong>å¾…å®š</strong>ï¼Œåˆ™åˆæˆçš„æœŸçº¦ä¹Ÿä¼š<strong>å¾…å®š</strong>ã€‚å¦‚æœæœ‰ä¸€ä¸ªåŒ…å«çš„æœŸçº¦<strong>æ‹’ç»</strong>ï¼Œåˆ™åˆæˆçš„æœŸçº¦ä¹Ÿä¼š<strong>æ‹’ç»</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æ°¸è¿œå¾…å®š</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p1)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;pending&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¸€æ¬¡æ‹’ç»ä¼šå¯¼è‡´æœ€ç»ˆæœŸçº¦æ‹’ç»</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;rejected&gt;</span></span>
<span class="line"></span></code></pre></div><p>â—ï¸ <strong>æ³¨æ„ï¼š</strong> å¦‚æœæœ‰æœŸçº¦æ‹’ç»ï¼Œåˆ™ <strong>ç¬¬ä¸€ä¸ªæ‹’ç»çš„æœŸçº¦</strong> ä¼šå°†è‡ªå·±çš„ç†ç”±ä½œä¸ºåˆæˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚ä¹‹åå†æ‹’ç»çš„æœŸçº¦ä¸ä¼šå½±å“æœ€ç»ˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚<strong>ä¸è¿‡ï¼Œè¿™å¹¶ä¸å½±å“æ‰€æœ‰åŒ…å«æœŸçº¦æ­£å¸¸çš„æ‹’ç»æ“ä½œã€‚</strong> åˆæˆçš„æœŸçº¦ä¼šé™é»˜å¤„ç†<strong>æ‰€æœ‰</strong>åŒ…å«æœŸçº¦çš„<strong>æ‹’ç»æ“ä½œ</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// è™½ç„¶åªæœ‰ç¬¬ä¸€ä¸ªæœŸçº¦çš„æ‹’ç»ç†ç”±ä¼šè¿›å…¥</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‹’ç»å¤„ç†ç¨‹åºï¼Œç¬¬äºŒä¸ªæœŸçº¦çš„æ‹’ç»ä¹Ÿ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¼šè¢«é™é»˜å¤„ç†ï¼Œä¸ä¼šæœ‰é”™è¯¯è·‘æ‰</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(reject</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">reason</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> reason))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰æœªå¤„ç†çš„é”™è¯¯</span></span>
<span class="line"></span></code></pre></div><h3 id="promise-race" tabindex="-1">Promise.race() <a class="header-anchor" href="#promise-race" aria-hidden="true">#</a></h3><p><code>Promise.race()</code>é™æ€æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…è£…æœŸçº¦ï¼Œæ˜¯ä¸€ç»„é›†åˆä¸­<strong>æœ€å…ˆè§£å†³æˆ–æ‹’ç»</strong>çš„æœŸçº¦ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼Œè¿”å›ä¸€ä¸ªæ–°æœŸçº¦ã€‚</p><p>å¦‚æœæœ‰ä¸€ä¸ªæœŸçº¦æ‹’ç»ï¼Œåªè¦å®ƒæ˜¯ç¬¬ä¸€ä¸ªè½å®šçš„ï¼Œå°±ä¼šæˆä¸ºæ‹’ç»åˆæˆæœŸçº¦çš„ç†ç”±ã€‚ä¹‹åå†æ‹’ç»çš„æœŸçº¦ä¸ä¼šå½±å“æœ€ç»ˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚ä¸è¿‡ï¼Œè¿™å¹¶ä¸å½±å“æ‰€æœ‰åŒ…å«æœŸçº¦æ­£å¸¸çš„æ‹’ç»æ“ä½œã€‚<strong>ä¸ <code>Promise.all()</code> ç±»ä¼¼ï¼Œåˆæˆçš„æœŸçº¦ä¼šé™é»˜å¤„ç†æ‰€æœ‰åŒ…å«æœŸçº¦çš„æ‹’ç»æ“ä½œ</strong>ã€‚</p><h2 id="æœŸçº¦æ‰©å±•" tabindex="-1">æœŸçº¦æ‰©å±• <a class="header-anchor" href="#æœŸçº¦æ‰©å±•" aria-hidden="true">#</a></h2><p>æ„Ÿè§‰ç”¨çš„ä¸å¤šï¼Ÿå…ˆæŒ–ä¸ªå‘ ğŸ˜˜ã€‚</p>`,75),e=[p];function t(c,r,y,D,F,A){return l(),n("div",null,e)}const d=s(o,[["render",t]]);export{i as __pageData,d as default};
