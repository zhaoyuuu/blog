import{_ as s,c as a,o as n,d as l}from"./app.cebf1889.js";const C=JSON.parse('{"title":"WeakSet å¼±é›†åˆ","description":"","frontmatter":{},"headers":[{"level":2,"title":"åŸºæœ¬ API","slug":"åŸºæœ¬-api","link":"#åŸºæœ¬-api","children":[]},{"level":2,"title":"å¼±å€¼","slug":"å¼±å€¼","link":"#å¼±å€¼","children":[]},{"level":2,"title":"ä¸å¯è¿­ä»£å€¼","slug":"ä¸å¯è¿­ä»£å€¼","link":"#ä¸å¯è¿­ä»£å€¼","children":[]}],"relativePath":"gemstone/Chapter 6 é›†åˆå¼•ç”¨ç±»å‹/WeakSet.md","lastUpdated":1677148163000}'),e={name:"gemstone/Chapter 6 é›†åˆå¼•ç”¨ç±»å‹/WeakSet.md"},o=l(`<h1 id="weakset-å¼±é›†åˆ" tabindex="-1">WeakSet å¼±é›†åˆ <a class="header-anchor" href="#weakset-å¼±é›†åˆ" aria-hidden="true">#</a></h1><p>éš¾åº¦ï¼šâ­ï¸â­ï¸</p><blockquote><p>ğŸ’Œ WeakSet æ˜¯ Set çš„â€œå…„å¼Ÿâ€ç±»å‹ï¼Œ<strong>å…¶ API ä¹Ÿæ˜¯ Set çš„å­é›†</strong>ã€‚WeakSet ä¸­çš„â€œweakâ€ï¼ˆå¼±ï¼‰ï¼Œæè¿°çš„æ˜¯ JavaScript <strong>åƒåœ¾å›æ”¶ç¨‹åºå¯¹å¾…â€œå¼±é›†åˆâ€ä¸­å€¼çš„æ–¹å¼</strong>ã€‚</p></blockquote><blockquote><p>âœ¨ <code>WeakSet å’Œ Set çš„å…³ç³»</code> ç›¸æ¯”äº <code>WeakMap å’Œ Map çš„å…³ç³»</code>ï¼Œä¸èƒ½è¯´ä¸€æ¨¡ä¸€æ ·ï¼Œåªèƒ½è¯´æ˜¯ä¸€ä¸ªæ¨¡å­åˆ»å‡ºæ¥çš„ï¼ˆWeakMap å¼±çš„æ˜¯â€œé”®â€ï¼ŒWeakSet å¼±çš„æ˜¯â€œå€¼â€ï¼‰ã€‚</p></blockquote><h2 id="åŸºæœ¬-api" tabindex="-1">åŸºæœ¬ API <a class="header-anchor" href="#åŸºæœ¬-api" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ws </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WeakSet</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>å¼±é›†åˆä¸­çš„<strong>å€¼åªèƒ½æ˜¯ Object æˆ–è€…ç»§æ‰¿è‡ª Object çš„ç±»å‹</strong>ï¼Œå°è¯•ä½¿ç”¨éå¯¹è±¡è®¾ç½®å€¼ä¼šæŠ›å‡º TypeErrorã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åˆå§‹åŒ–æ˜¯å…¨æœ‰æˆ–å…¨æ— çš„æ“ä½œ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// åªè¦æœ‰ä¸€ä¸ªå€¼æ— æ•ˆå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¯¼è‡´æ•´ä¸ªåˆå§‹åŒ–å¤±è´¥</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ws2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WeakSet</span><span style="color:#A6ACCD;">([val1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">BADVAL</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> val3])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// TypeError: Invalid value used in WeakSet</span></span>
<span class="line"><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> ws2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ReferenceError: ws2 is not defined</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// åŸå§‹å€¼å¯ä»¥å…ˆåŒ…è£…æˆå¯¹è±¡å†ç”¨ä½œå€¼</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> stringVal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">val1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ws3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WeakSet</span><span style="color:#A6ACCD;">([stringVal])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">alert</span><span style="color:#A6ACCD;">(ws3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has</span><span style="color:#A6ACCD;">(stringVal))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span></code></pre></div><h2 id="å¼±å€¼" tabindex="-1">å¼±å€¼ <a class="header-anchor" href="#å¼±å€¼" aria-hidden="true">#</a></h2><p>åŒ <a href="/blog/gemstone/Chapter 6 é›†åˆå¼•ç”¨ç±»å‹/WeakMap.html#å¼±é”®">WeakMap å¼±é”®</a>ï¼Œåªä¸è¿‡<strong>å¼±é”®å˜æˆäº†å¼±å€¼</strong>ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ws </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WeakSet</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">val</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">val)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">removeReference</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>container</code> å¯¹è±¡ç»´æŠ¤ç€ä¸€ä¸ª<strong>å¯¹å¼±é›†åˆå€¼çš„å¼•ç”¨</strong>ï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡å€¼ä¸ä¼šæˆä¸ºåƒåœ¾å›æ”¶çš„ç›®æ ‡ã€‚ä¸è¿‡ï¼Œå¦‚æœè°ƒç”¨äº† <code>removeReference()</code>ï¼Œå°±ä¼š<strong>æ‘§æ¯å€¼å¯¹è±¡çš„æœ€åä¸€ä¸ªå¼•ç”¨</strong>ï¼Œåƒåœ¾å›æ”¶ç¨‹åºå°±å¯ä»¥æŠŠè¿™ä¸ªå€¼æ¸…ç†æ‰ã€‚</p><h2 id="ä¸å¯è¿­ä»£å€¼" tabindex="-1">ä¸å¯è¿­ä»£å€¼ <a class="header-anchor" href="#ä¸å¯è¿­ä»£å€¼" aria-hidden="true">#</a></h2><p>WeakSet ä¹‹æ‰€ä»¥é™åˆ¶åªèƒ½ç”¨å¯¹è±¡ä½œä¸ºå€¼ï¼Œæ˜¯ä¸ºäº†ä¿è¯<strong>åªæœ‰é€šè¿‡å€¼å¯¹è±¡çš„å¼•ç”¨æ‰èƒ½å–å¾—å€¼</strong>ã€‚</p><blockquote><p>å¦‚æœå…è®¸åŸå§‹å€¼ï¼Œé‚£å°±æ²¡åŠæ³•åŒºåˆ†<strong>åˆå§‹åŒ–æ—¶</strong>ä½¿ç”¨çš„å­—ç¬¦ä¸²å­—é¢é‡å’Œ<strong>åˆå§‹åŒ–ä¹‹å</strong>ä½¿ç”¨çš„ä¸€ä¸ªç›¸ç­‰çš„å­—ç¬¦ä¸²äº†ã€‚</p></blockquote><br><hr><p>WeakSet å’Œ WeakMap å®åœ¨æ˜¯å¤ªåƒäº†ã€‚</p>`,18),p=[o];function t(c,r,D,y,i,A){return n(),a("div",null,p)}const d=s(e,[["render",t]]);export{C as __pageData,d as default};
