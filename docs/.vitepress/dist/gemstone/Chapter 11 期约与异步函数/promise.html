<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>promise æœŸçº¦ | zhaoyuuu's blog</title>
    <meta name="description" content="ä¸ªäººåšå®¢ï¼Œè®°å½•å‰ç«¯ä¸€äº› æœ‰æ·±åº¦/æœ‰ä»·å€¼/æœ‰æ„æ€ çš„ä¸œè¥¿">
    <link rel="preload stylesheet" href="/blog/assets/style.77042442.css" as="style">
    <link rel="modulepreload" href="/blog/assets/chunks/VPAlgoliaSearchBox.82560a81.js">
    <link rel="modulepreload" href="/blog/assets/app.cebf1889.js">
    <link rel="modulepreload" href="/blog/assets/gemstone_Chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°_promise.md.9493b063.lean.js">
    
    <link rel="icon" type="image/x-icon" href="/blog/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1203d8e6><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2e9739cf></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2e9739cf> Skip to content </a><!--]--><!----><header class="VPNav" data-v-1203d8e6 data-v-83b8c875><div class="VPNavBar has-sidebar" data-v-83b8c875 data-v-03e16cd6><div class="container" data-v-03e16cd6><div class="title" data-v-03e16cd6><div class="VPNavBarTitle has-sidebar" data-v-03e16cd6 data-v-64da2804><a class="title" href="/blog/" data-v-64da2804><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://raw.githubusercontent.com/zhaoyuuu/blog/206b969f0a010b2de78851fcecf01a00a96b1626/docs/assets/logo.svg" alt data-v-7978b747><!--]--><!--[-->zhaoyuuu<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-03e16cd6><div class="curtain" data-v-03e16cd6></div><div class="content-body" data-v-03e16cd6><!--[--><!--]--><div class="VPNavBarSearch search" data-v-03e16cd6 style="--6e93fca4:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-03e16cd6 data-v-d9de7d57><span id="main-nav-aria-label" class="visually-hidden" data-v-d9de7d57>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/guide.html" data-v-d9de7d57 data-v-fa16d13f data-v-84239154><!--[-->Guide<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/about_me.html" data-v-d9de7d57 data-v-fa16d13f data-v-84239154><!--[-->About Me<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-03e16cd6 data-v-99e45c62><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-99e45c62 data-v-53e66e0e data-v-921814f1><span class="check" data-v-921814f1><span class="icon" data-v-921814f1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-53e66e0e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-53e66e0e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-03e16cd6 data-v-70689af9 data-v-3c0d6059><!--[--><a class="VPSocialLink" href="https://github.com/zhaoyuuu/blog" target="_blank" rel="noopener" data-v-3c0d6059 data-v-e947e436><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-03e16cd6 data-v-ce37be00 data-v-416e26d1><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-416e26d1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-416e26d1><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-416e26d1><div class="VPMenu" data-v-416e26d1 data-v-2c4a8884><!----><!--[--><!--[--><!----><div class="group" data-v-ce37be00><div class="item appearance" data-v-ce37be00><p class="label" data-v-ce37be00>Appearance</p><div class="appearance-action" data-v-ce37be00><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-ce37be00 data-v-53e66e0e data-v-921814f1><span class="check" data-v-921814f1><span class="icon" data-v-921814f1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-53e66e0e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-53e66e0e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-ce37be00><div class="item social-links" data-v-ce37be00><div class="VPSocialLinks social-links-list" data-v-ce37be00 data-v-3c0d6059><!--[--><a class="VPSocialLink" href="https://github.com/zhaoyuuu/blog" target="_blank" rel="noopener" data-v-3c0d6059 data-v-e947e436><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-03e16cd6 data-v-ee9426bd><span class="container" data-v-ee9426bd><span class="top" data-v-ee9426bd></span><span class="middle" data-v-ee9426bd></span><span class="bottom" data-v-ee9426bd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-1203d8e6 data-v-f796cf25><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f796cf25><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f796cf25><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f796cf25>Menu</span></button><a class="top-link" href="#" data-v-f796cf25>Return to top</a></div><aside class="VPSidebar" data-v-1203d8e6 data-v-541c783b><div class="curtain" data-v-541c783b></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-541c783b><span class="visually-hidden" id="sidebar-aria-label" data-v-541c783b> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-541c783b><section class="VPSidebarItem level-0 has-active" data-v-541c783b data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h2 class="text" data-v-f8bc9819>gemstone çº¢å®ä¹¦</h2><!--]--><!----></a><!----></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/intro.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>introduction</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 4 å˜é‡ã€ä½œç”¨åŸŸä¸å†…å­˜</h3><!--]--><!----></a><div class="caret" role="button" data-v-f8bc9819><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-f8bc9819><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%204%20%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98/%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>å‚æ•°çš„ä¼ é€’</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%204%20%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸé“¾</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%204%20%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>åƒåœ¾å›æ”¶</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 6 é›†åˆå¼•ç”¨ç±»å‹</h3><!--]--><!----></a><div class="caret" role="button" data-v-f8bc9819><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-f8bc9819><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/Object.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>Object</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/Array.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>Array</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/Map.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>Map</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/WeakMap.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>WeakMap</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/Set.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>Set</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%206%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/WeakSet.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>WeakSet</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 8 å¯¹è±¡ã€ç±»ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹</h3><!--]--><!----></a><div class="caret" role="button" data-v-f8bc9819><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-f8bc9819><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%208%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/understand_object.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>ç†è§£å¯¹è±¡</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%208%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/create_object.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>åˆ›å»ºå¯¹è±¡</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%208%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/inherit.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>inherit ç»§æ‰¿</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%208%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/class.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>class ç±»</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 10 å‡½æ•°</h3><!--]--><!----></a><!----></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2010%20%E5%87%BD%E6%95%B0/function.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>function</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible has-active" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°</h3><!--]--><!----></a><div class="caret" role="button" data-v-f8bc9819><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-f8bc9819><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link is-active has-active" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2011%20%E6%9C%9F%E7%BA%A6%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0/promise.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>promise</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2011%20%E6%9C%9F%E7%BA%A6%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0/async&amp;await.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>async & await</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>Chapter 12 BOM</h3><!--]--><!----></a><!----></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2012%20BOM/window.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>window</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2012%20BOM/location.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>location</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/gemstone/Chapter%2012%20BOM/navigator.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>navigator</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-541c783b><section class="VPSidebarItem level-0 collapsible collapsed" data-v-541c783b data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h2 class="text" data-v-f8bc9819>handwritten æ‰‹å†™</h2><!--]--><!----></a><div class="caret" role="button" data-v-f8bc9819><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-f8bc9819><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/intro.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>0 introduction</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/debounce.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>1 å®ç°é˜²æŠ–å‡½æ•°ï¼ˆdebounceï¼‰</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/throttle.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>2 å®ç°èŠ‚æµå‡½æ•°ï¼ˆthrottleï¼‰</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/instanceof.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>3 å®ç°instanceof</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/new.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>4 å®ç°newçš„è¿‡ç¨‹</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/call.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>5 å®ç°callæ–¹æ³•</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/apply.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>6 å®ç°applyæ–¹æ³•</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/bind.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>7 å®ç°bindæ–¹æ³•</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/deepClone.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>8 å®ç°æ·±æ‹·è´</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/setInterval(setTimeout).html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>9 å®ç°setIntervalå’ŒsetTimeout</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/array_collection.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>10 æ•°ç»„åˆé›†</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/promise_collection.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>11 Promiseåˆé›†</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/ajax.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>12 å®ç°AJAX</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/sort.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>13 æ‰‹å†™å¸¸è§æ’åº</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/handwritten/Object.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>14 Objectåˆé›†</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-541c783b><section class="VPSidebarItem level-0" data-v-541c783b data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h2 class="text" data-v-f8bc9819>essays éšç¬”</h2><!--]--><!----></a><!----></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-1 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/essays/intro.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>introduction</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-f8bc9819 data-v-f8bc9819><div class="item" role="button" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link" data-v-f8bc9819 data-v-84239154><!--[--><h3 class="text" data-v-f8bc9819>youth_traning_camp é’è®­è¥</h3><!--]--><!----></a><!----></div><div class="items" data-v-f8bc9819><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/essays/youth_camp/violet-design.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>violet-design</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f8bc9819 data-v-f8bc9819><div class="item" data-v-f8bc9819><div class="indicator" data-v-f8bc9819></div><a class="VPLink link link" href="/blog/essays/youth_camp/webpack.html" data-v-f8bc9819 data-v-84239154><!--[--><p class="text" data-v-f8bc9819>webpack</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1203d8e6 data-v-8dabf1cd><div class="VPDoc has-sidebar has-aside" data-v-8dabf1cd data-v-e57f94bd><div class="container" data-v-e57f94bd><div class="aside" data-v-e57f94bd><div class="aside-curtain" data-v-e57f94bd></div><div class="aside-container" data-v-e57f94bd><div class="aside-content" data-v-e57f94bd><div class="VPDocAside" data-v-e57f94bd data-v-093d7025><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-093d7025 data-v-6c0c35ae><div class="content" data-v-6c0c35ae><div class="outline-marker" data-v-6c0c35ae></div><div class="outline-title" data-v-6c0c35ae>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6c0c35ae><span class="visually-hidden" id="doc-outline-aria-label" data-v-6c0c35ae> Table of Contents for current page </span><ul class="root" data-v-6c0c35ae data-v-f8e42599><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-093d7025></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e57f94bd><div class="content-container" data-v-e57f94bd><!--[--><!--]--><main class="main" data-v-e57f94bd><div style="position:relative;" class="vp-doc _blog_gemstone_Chapter%2011%20%E6%9C%9F%E7%BA%A6%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0_promise" data-v-e57f94bd><div><p>æä¸€ä¸‹ <strong>ä»¥å¾€çš„ï¼ˆè¿‡æ—¶çš„ï¼‰</strong> å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼š<code>setTimeout()</code> å’Œ å›è°ƒå‡½æ•° ã€‚<br> âŒ <strong>ç¼ºç‚¹ï¼š</strong> éšç€ä»£ç è¶Šæ¥è¶Šå¤æ‚ï¼Œå›è°ƒç­–ç•¥æ˜¯<strong>ä¸å…·æœ‰æ‰©å±•æ€§</strong>çš„ã€‚<strong>â€œå›è°ƒåœ°ç‹±â€</strong> è¿™ä¸ªç§°å‘¼å¯è°“åè‡³å®å½’ ğŸ‘ã€‚åµŒå¥—å›è°ƒçš„ä»£ç ç»´æŠ¤èµ·æ¥å°±æ˜¯å™©æ¢¦ã€‚</p><hr><h1 id="promise-æœŸçº¦" tabindex="-1">promise æœŸçº¦ <a class="header-anchor" href="#promise-æœŸçº¦" aria-hidden="true">#</a></h1><p>éš¾åº¦ï¼šâ­ï¸â­ï¸â­ï¸</p><blockquote><p>ğŸ’Œ æœŸçº¦æ˜¯å¯¹<strong>å°šä¸å­˜åœ¨</strong>ç»“æœçš„ä¸€ä¸ªæ›¿èº«ã€‚</p></blockquote><p>ECMAScript 6 å¢åŠ äº†å¯¹ Promises/A+ è§„èŒƒçš„å®Œå–„æ”¯æŒï¼Œå³ <code>Promise</code> ç±»å‹ã€‚ä¸€ç»æ¨å‡ºï¼Œ<code>Promise</code> å°±å¤§å—æ¬¢è¿ï¼Œæˆä¸ºäº†<strong>ä¸»å¯¼æ€§çš„å¼‚æ­¥ç¼–ç¨‹æœºåˆ¶</strong>ã€‚æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ ES6 æœŸçº¦ï¼Œå¾ˆå¤šå…¶ä»–æµè§ˆå™¨ APIï¼ˆå¦‚<code>fetch()</code>å’Œ <code>Battery Status API</code>ï¼‰ä¹Ÿä»¥ <code>promise</code> ä¸ºåŸºç¡€ã€‚</p><h2 id="promise-åŸºç¡€" tabindex="-1">promise åŸºç¡€ <a class="header-anchor" href="#promise-åŸºç¡€" aria-hidden="true">#</a></h2><blockquote><p>ğŸ‘‰ å¦‚æœä½ ä¹‹å‰äº†è§£è¿‡ <code>promise</code> ï¼Œé‚£è¿™ä¸€èŠ‚å¯¹ä½ æ¥è¯´å…¶å®æ²¡å¤šå°‘æ–°çš„çŸ¥è¯†ã€‚ä½†æ˜¯æˆ‘å‘ç°ä¹¦ä¸­æœ‰å¾ˆå¤šè¯´æ³•æ˜¯æˆ‘ä¹‹å‰æ²¡è§è¿‡çš„ï¼Œä¹ä¸€çœ‹è§‰å¾—æ•…å¼„ç„è™šï¼Œä½†ä»”ç»†ç¢ç£¨ä¸€ä¸‹å°±å¯ä»¥å‘ç°è¿™äº›è¯­è¨€ç»„ç»‡å¾—å¾ˆç²¾å¦™ï¼Œæ˜¯æœ€ä¸€é’ˆè§è¡€çš„æè¿° ğŸ¥³ã€‚æ¯”èµ·å¸‚é¢ä¸Š åŠ å·¥è¿‡çš„ã€åƒç¯‡ä¸€å¾‹ çš„â€œæ°´æ–‡â€å¥½ä¸€ç™¾å€ã€‚</p></blockquote><h3 id="çŠ¶æ€æœº" tabindex="-1">çŠ¶æ€æœº <a class="header-anchor" href="#çŠ¶æ€æœº" aria-hidden="true">#</a></h3><p>æœŸçº¦æ˜¯ä¸€ä¸ª<strong>æœ‰çŠ¶æ€çš„å¯¹è±¡</strong>ï¼Œå¯èƒ½å¤„äºå¦‚ä¸‹ 3 ç§çŠ¶æ€ä¹‹ä¸€ï¼š</p><ul><li>å¾…å®šï¼ˆ<code>pending</code>ï¼‰</li><li>å…‘ç°ï¼ˆ<code>fulfilled</code>ï¼Œæœ‰æ—¶å€™ä¹Ÿç§°ä¸ºâ€œè§£å†³â€ï¼Œ<code>resolved</code>ï¼‰</li><li>æ‹’ç»ï¼ˆ<code>rejected</code>ï¼‰</li></ul><p>çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µä¸å†èµ˜è¿°ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>æœŸçº¦çš„çŠ¶æ€æ˜¯ç§æœ‰çš„</strong>ï¼Œä¸èƒ½ç›´æ¥é€šè¿‡ JavaScript æ£€æµ‹åˆ°ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ ¹æ®è¯»å–åˆ°çš„æœŸçº¦çŠ¶æ€ï¼Œä»¥åŒæ­¥æ–¹å¼å¤„ç†æœŸçº¦å¯¹è±¡ã€‚å¦å¤–ï¼ŒæœŸçº¦çš„çŠ¶æ€ä¹Ÿä¸èƒ½è¢«å¤–éƒ¨ JavaScript ä»£ç ä¿®æ”¹ã€‚è¿™ä¸ä¸èƒ½è¯»å–è¯¥çŠ¶æ€çš„åŸå› æ˜¯ä¸€æ ·çš„ï¼š<strong>æœŸçº¦æ•…æ„å°†å¼‚æ­¥è¡Œä¸ºå°è£…èµ·æ¥ï¼Œä»è€Œéš”ç¦»å¤–éƒ¨çš„åŒæ­¥ä»£ç </strong>ã€‚</p><h3 id="promise-resolve" tabindex="-1">Promise.resolve() <a class="header-anchor" href="#promise-resolve" aria-hidden="true">#</a></h3><p>ğŸŸ¢ ä½¿ç”¨è¿™ä¸ªé™æ€æ–¹æ³•ï¼Œå®é™…ä¸Šå¯ä»¥æŠŠä»»ä½•å€¼éƒ½<strong>è½¬æ¢ä¸ºä¸€ä¸ªæœŸçº¦</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å¤šä½™çš„å‚æ•°ä¼šå¿½ç•¥</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: 4</span></span>
<span class="line"></span></code></pre></div><p>ğŸ”´ å¯¹è¿™ä¸ªé™æ€æ–¹æ³•è€Œè¨€ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°<strong>æœ¬èº«æ˜¯ä¸€ä¸ªæœŸçº¦</strong>ï¼Œé‚£å®ƒçš„è¡Œä¸ºå°±ç±»ä¼¼äºä¸€ä¸ª<strong>ç©ºåŒ…è£…</strong>ã€‚å› æ­¤ï¼Œ<code>Promise.resolve() </code>å¯ä»¥è¯´æ˜¯ä¸€ä¸ª<strong>å¹‚ç­‰æ–¹æ³•</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(p))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(p)))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span></code></pre></div><blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Promise.resolve()</code> æ£€æµ‹åˆ°å‚æ•°æ˜¯ä¸€ä¸ª <code>promsie</code> å¯¹è±¡ä¹‹åï¼Œ<strong>åŸå°ä¸åŠ¨</strong>çš„è¿”å›è¿™ä¸ª <code>promsie</code> å¯¹è±¡ã€‚</p></blockquote><p>âš  æ³¨æ„ï¼Œè¿™ä¸ªé™æ€æ–¹æ³•èƒ½å¤Ÿ<strong>åŒ…è£…ä»»ä½•éæœŸçº¦å€¼</strong>ï¼ŒåŒ…æ‹¬<strong>é”™è¯¯å¯¹è±¡</strong>ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º<strong>è§£å†³çš„æœŸçº¦</strong>ã€‚å› æ­¤ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: Error: foo</span></span>
<span class="line"></span></code></pre></div><blockquote><p>å¦‚ä¸Šï¼Œé”™è¯¯å¯¹è±¡å…ˆè¢«è½¬æ¢æˆ<strong>çŠ¶æ€ä¸º <code>resolved</code> çš„æœŸçº¦</strong>ï¼Œç„¶åå¹‚ç­‰è¿”å›ã€‚æ‰€ä»¥æœ€åè¿”å›å€¼æ˜¯ä¸€ä¸ª <code>resolved</code> æœŸçº¦ï¼ˆåç›´è§‰ï¼‰ã€‚ä½†æ˜¯é”™è¯¯å¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡ï¼Œ<code>Promise.resolve()</code> è¿™æ ·åšä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p></blockquote><h3 id="promise-reject" tabindex="-1">Promise.reject() <a class="header-anchor" href="#promise-reject" aria-hidden="true">#</a></h3><p>ä¸ <code>Promise.resolve()</code>ç±»ä¼¼ï¼Œ<code>Promise.reject()</code>ä¼šå®ä¾‹åŒ–ä¸€ä¸ªæ‹’ç»çš„æœŸçº¦å¹¶æŠ›å‡ºä¸€ä¸ªå¼‚æ­¥é”™è¯¯ã€‚<br> â—ï¸ <strong>å…³é”®åœ¨äºï¼š</strong><code>Promise.reject()</code>å¹¶æ²¡æœ‰ç…§æ¬ <code>Promise.resolve()</code>çš„å¹‚ç­‰é€»è¾‘ã€‚å¦‚æœç»™å®ƒä¼ ä¸€ä¸ª<strong>æœŸçº¦å¯¹è±¡</strong>ï¼Œåˆ™è¿™ä¸ªæœŸçº¦ä¼šæˆä¸ºå®ƒ<strong>è¿”å›çš„æ‹’ç»æœŸçº¦çš„ç†ç”±</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise { &lt;rejected&gt; Promise { undefined } }</span></span>
<span class="line"></span></code></pre></div><br><p>å•°å—¦å‡ å¥ ğŸ™ƒï¼š<br> å°±æ–¹æ³•åç§°æ¥çœ‹ï¼Œç›´è§‰ä¸Šæˆ‘ä»¬ä¼šè®¤ä¸º <code>Promise.resolve()</code> å’Œ <code>Promise.reject()</code> çš„é€»è¾‘è®¾è®¡åº”è¯¥ä¸€æ ·ï¼Œå¯äº‹å®å¹¶éå¦‚æ­¤ã€‚å°±åƒä¸Šé¢æ‰€æ¼”ç¤ºçš„ï¼Œ<code>Promise.reject()</code> ä¸éµä»å¹‚ç­‰é€»è¾‘ï¼Œæ¢åš<code>Promise.resolve()</code>çš„è¯ï¼Œç»“æœä¼šæ˜¯è¿™æ ·ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Promise { undefined }</span></span>
<span class="line"></span></code></pre></div><h3 id="åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§" tabindex="-1">åŒæ­¥/å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§ <a class="header-anchor" href="#åŒæ­¥-å¼‚æ­¥æ‰§è¡Œçš„äºŒå…ƒæ€§" aria-hidden="true">#</a></h3><p>Promise çš„è®¾è®¡å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šå¯¼è‡´ä¸€ç§å®Œå…¨ä¸åŒäº JavaScript çš„è®¡ç®—æ¨¡å¼ã€‚ä¸‹é¢çš„ä¾‹å­å®Œç¾åœ°å±•ç¤ºäº†è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ç§æ¨¡å¼ä¸‹æŠ›å‡ºé”™è¯¯çš„æƒ…å½¢ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;">(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// Error: foo</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;">(e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Uncaught (in promise) Error: bar</span></span>
<span class="line"></span></code></pre></div><p>ç¬¬ä¸€ä¸ª <code>try/catch</code> æŠ›å‡ºå¹¶æ•è·äº†é”™è¯¯ï¼Œç¬¬äºŒä¸ª <code>try/catch</code> æŠ›å‡ºé”™è¯¯å´æ²¡æœ‰æ•è·åˆ°ï¼Œæ˜¯å› ä¸ºå®ƒæ²¡æœ‰é€šè¿‡<strong>å¼‚æ­¥æ¨¡å¼</strong>æ•è·é”™è¯¯ã€‚</p><blockquote><p>ğŸ‘‰ ä»è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæœŸçº¦çœŸæ­£çš„å¼‚æ­¥ç‰¹æ€§ï¼šå®ƒä»¬æ˜¯åŒæ­¥å¯¹è±¡ï¼ˆåœ¨åŒæ­¥æ‰§è¡Œæ¨¡å¼ä¸­ä½¿ç”¨ï¼‰ï¼Œä½†ä¹Ÿæ˜¯å¼‚æ­¥æ‰§è¡Œæ¨¡å¼çš„åª’ä»‹ã€‚</p></blockquote><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œ<strong>æ‹’ç»æœŸçº¦çš„é”™è¯¯</strong>å¹¶æ²¡æœ‰æŠ›åˆ°æ‰§è¡Œ<strong>åŒæ­¥ä»£ç çš„çº¿ç¨‹</strong>é‡Œï¼Œè€Œæ˜¯é€šè¿‡æµè§ˆå™¨<strong>å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—</strong>æ¥å¤„ç†çš„ã€‚å› æ­¤ï¼Œ<code>try/catch</code> å—å¹¶ä¸èƒ½æ•è·è¯¥é”™è¯¯ã€‚<br></p><blockquote><p>âœ¨ ä»£ç ä¸€æ—¦å¼€å§‹ä»¥<strong>å¼‚æ­¥æ¨¡å¼</strong>æ‰§è¡Œï¼Œåˆ™<strong>å”¯ä¸€ä¸ä¹‹äº¤äº’çš„æ–¹å¼</strong>å°±æ˜¯ä½¿ç”¨å¼‚æ­¥ç»“æ„â€”â€”æ›´å…·ä½“åœ°è¯´ï¼Œå°±æ˜¯<strong>æœŸçº¦çš„æ–¹æ³•</strong>ã€‚</p></blockquote><h2 id="æœŸçº¦çš„å®ä¾‹æ–¹æ³•" tabindex="-1">æœŸçº¦çš„å®ä¾‹æ–¹æ³• <a class="header-anchor" href="#æœŸçº¦çš„å®ä¾‹æ–¹æ³•" aria-hidden="true">#</a></h2><p>ğŸŒ‰ æœŸçº¦å®ä¾‹çš„æ–¹æ³•æ˜¯è¿æ¥<strong>å¤–éƒ¨åŒæ­¥ä»£ç </strong>ä¸<strong>å†…éƒ¨å¼‚æ­¥ä»£ç </strong>ä¹‹é—´çš„æ¡¥æ¢ã€‚</p><h3 id="thenable-æ¥å£" tabindex="-1">Thenable æ¥å£ <a class="header-anchor" href="#thenable-æ¥å£" aria-hidden="true">#</a></h3><p>åœ¨ ECMAScript æš´éœ²çš„å¼‚æ­¥ç»“æ„ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>then()</code> æ–¹æ³•ã€‚</p><h3 id="promise-prototype-then" tabindex="-1">Promise.prototype.then() <a class="header-anchor" href="#promise-prototype-then" aria-hidden="true">#</a></h3><p>è¿™ä¸ª then()æ–¹æ³•æ¥æ”¶æœ€å¤šä¸¤ä¸ªå‚æ•°ï¼š<code>onResolved</code> å¤„ç†ç¨‹åºå’Œ <code>onRejected</code> å¤„ç†ç¨‹åºã€‚å› ä¸ºæœŸçº¦åªèƒ½è½¬æ¢ä¸ºæœ€ç»ˆçŠ¶æ€ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæ“ä½œä¸€å®šæ˜¯<strong>äº’æ–¥</strong>çš„ã€‚</p><p>â—ï¸ æ³¨æ„è¿”å›å€¼ï¼š<br> è¿™ä¸ªæ–°æœŸçº¦å®ä¾‹åŸºäº <code>onResovled</code> å¤„ç†ç¨‹åºçš„è¿”å›å€¼æ„å»ºã€‚æ¢å¥è¯è¯´ï¼Œè¯¥å¤„ç†ç¨‹åºçš„<strong>è¿”å›å€¼ä¼šé€šè¿‡ <code>Promise.resolve()</code> åŒ…è£…æ¥ç”Ÿæˆæ–°æœŸçº¦</strong>ã€‚</p><ul><li>å¦‚æœ<strong>æ²¡æœ‰æä¾›è¿™ä¸ªå¤„ç†ç¨‹åº</strong>ï¼Œåˆ™ <code>Promise.resolve()</code> å°±ä¼šåŒ…è£…ä¸Šä¸€ä¸ªæœŸçº¦è§£å†³ä¹‹åçš„å€¼ã€‚</li><li>å¦‚æœ<strong>æ²¡æœ‰æ˜¾å¼çš„è¿”å›è¯­å¥</strong>ï¼Œåˆ™ <code>Promise.resolve()</code>ä¼šåŒ…è£…é»˜è®¤çš„è¿”å›å€¼ <code>undefined</code>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è‹¥è°ƒç”¨ then()æ—¶ä¸ä¼ å¤„ç†ç¨‹åºï¼Œåˆ™åŸæ ·å‘åä¼ </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰æ˜¾å¼çš„è¿”å›è¯­å¥</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">no return</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: undefined</span></span>
<span class="line"></span></code></pre></div><ul><li>å¦‚æœ<strong>æœ‰æ˜¾å¼çš„è¿”å›å€¼</strong>ï¼Œåˆ™ <code>Promise.resolve()</code>ä¼šåŒ…è£…è¿™ä¸ªå€¼ï¼ˆä¸€èˆ¬æƒ…å†µï¼‰ï¼š</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p8 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p9 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Uncaught (in promise): undefined</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p8)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;pending&gt;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p9)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;rejected&gt;: undefined</span></span>
<span class="line"></span></code></pre></div><br><p>ğŸ‘‰ <code>onRejected</code> å¤„ç†ç¨‹åºä¹Ÿä¸ä¹‹ç±»ä¼¼ï¼š<code>onRejected</code> å¤„ç†ç¨‹åºè¿”å›çš„å€¼<strong>ä¹Ÿä¼šè¢« <code>Promise.resolve()</code>åŒ…è£…</strong>ã€‚</p><h3 id="promise-prototype-catch" tabindex="-1">Promise.prototype.catch() <a class="header-anchor" href="#promise-prototype-catch" aria-hidden="true">#</a></h3><p>è¿™ä¸ªæ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š<code>onRejected</code> å¤„ç†ç¨‹åºã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ª<strong>è¯­æ³•ç³–</strong>ğŸ­ï¼Œè°ƒç”¨å®ƒå°±ç›¸å½“äºè°ƒç”¨ <code>Promise.prototype. then(null, onRejected)</code>ã€‚</p><p><strong>è¿”å›å€¼ï¼š</strong> åœ¨è¿”å›æ–°æœŸçº¦å®ä¾‹æ–¹é¢ï¼Œ<code>Promise.prototype.catch()</code>çš„è¡Œä¸ºä¸ <code>Promise.prototype.then()</code>çš„ <code>onRejected</code> å¤„ç†ç¨‹åºæ˜¯ä¸€æ ·çš„ ğŸ¤—ã€‚</p><h3 id="promise-prototype-finally" tabindex="-1">Promise.prototype.finally() <a class="header-anchor" href="#promise-prototype-finally" aria-hidden="true">#</a></h3><p>è¿™ä¸ªæ–°æœŸçº¦å®ä¾‹ä¸åŒäº <code>then()</code>æˆ– <code>catch()</code>æ–¹å¼<strong>è¿”å›çš„å®ä¾‹</strong>ï¼ˆè¿”å›å€¼ï¼‰ã€‚å› ä¸º <code>onFinally</code> è¢«è®¾è®¡ä¸ºä¸€ä¸ª<strong>çŠ¶æ€æ— å…³</strong>çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒå°†è¡¨ç°ä¸º<strong>çˆ¶æœŸçº¦çš„ä¼ é€’</strong>ã€‚å¯¹äºå·²è§£å†³çŠ¶æ€å’Œè¢«æ‹’ç»çŠ¶æ€éƒ½æ˜¯å¦‚æ­¤ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è¿™é‡Œéƒ½ä¼šåŸæ ·åä¼ </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p4 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p5 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p6 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p7 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p8 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">qux</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p4)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p5)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p6)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p7)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p8)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;resolved&gt;: foo</span></span>
<span class="line"></span></code></pre></div><h3 id="éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº" tabindex="-1">éé‡å…¥æœŸçº¦æ–¹æ³•ï¼ˆæ‰§è¡Œé¡ºåºï¼‰ <a class="header-anchor" href="#éé‡å…¥æœŸçº¦æ–¹æ³•-æ‰§è¡Œé¡ºåº" aria-hidden="true">#</a></h3><p>å½“æœŸçº¦è¿›å…¥è½å®šçŠ¶æ€æ—¶ï¼Œä¸è¯¥çŠ¶æ€ç›¸å…³çš„å¤„ç†ç¨‹åºä»…ä»…ä¼šè¢«<strong>æ’æœŸ</strong>ï¼Œè€Œéç«‹å³æ‰§è¡Œã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åˆ›å»ºè§£å†³çš„æœŸçº¦</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ·»åŠ è§£å†³å¤„ç†ç¨‹åº</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›´è§‰ä¸Šï¼Œè¿™ä¸ªå¤„ç†ç¨‹åºä¼šç­‰æœŸçº¦ä¸€è§£å†³å°±æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">onResolved handler</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// åŒæ­¥è¾“å‡ºï¼Œè¯æ˜ then()å·²ç»è¿”å›</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å®é™…çš„è¾“å‡ºï¼š</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// onResolved handler</span></span>
<span class="line"></span></code></pre></div><p>éé‡å…¥é€‚ç”¨äº <code>onResolved/onRejected</code> å¤„ç†ç¨‹åºã€<code>catch()</code>å¤„ç†ç¨‹åºå’Œ <code>finally()</code>å¤„ç†ç¨‹åºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1.then() onResolved</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1.then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2.then() onRejected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2.then() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3.catch() onRejected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3.catch() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p4 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">finally</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4.finally() onFinally</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4.finally() returns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p1.then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p2.then() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p3.catch() returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p4.finally() returns</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p1.then() onResolved</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p2.then() onRejected</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p3.catch() onRejected</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// p4.finally() onFinally</span></span>
<span class="line"></span></code></pre></div><blockquote><p>ç”¨è¿‡ <code>promise</code> çš„åŒå­¦åº”è¯¥å¯¹ä¸Šé¢çš„è¾“å‡ºç»“æœ<strong>ä¸ä¼šæ„Ÿåˆ°ä¸æ¯«æ„å¤–</strong>ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä»‹ç»ä¸€ä¸‹ <strong>â€œéé‡å…¥â€</strong> è¿™ä¸€æ¦‚å¿µã€‚</p></blockquote><h2 id="æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ" tabindex="-1">æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ <a class="header-anchor" href="#æœŸçº¦è¿é”ä¸æœŸçº¦åˆæˆ" aria-hidden="true">#</a></h2><p>è®©æ¯ä¸ªæ‰§è¡Œå™¨éƒ½<strong>è¿”å›ä¸€ä¸ªæœŸçº¦å®ä¾‹</strong>ï¼Œè¿™æ ·å°±å¯ä»¥è®©æ¯ä¸ªåç»­æœŸçº¦éƒ½ç­‰å¾…ä¹‹å‰çš„æœŸçº¦ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸²è¡ŒåŒ–å¼‚æ­¥ä»»åŠ¡</strong>ã€‚æ¯”å¦‚ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·è®©æ¯ä¸ªæœŸçº¦åœ¨ä¸€å®šæ—¶é—´åè§£å†³ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p4 executor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p1 executorï¼ˆ1 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p2 executorï¼ˆ2 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p3 executorï¼ˆ3 ç§’åï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// p4 executorï¼ˆ4 ç§’åï¼‰</span></span>
<span class="line"></span></code></pre></div><p>æ¯ä¸ªåç»­çš„å¤„ç†ç¨‹åºéƒ½ä¼š<strong>ç­‰å¾…å‰ä¸€ä¸ªæœŸçº¦è§£å†³</strong>ï¼Œç„¶å<strong>å®ä¾‹åŒ–ä¸€ä¸ªæ–°æœŸçº¦å¹¶è¿”å›å®ƒ</strong>ã€‚è¿™ç§ç»“æ„å¯ä»¥ç®€æ´åœ°å°†å¼‚æ­¥ä»»åŠ¡ä¸²è¡ŒåŒ–ï¼Œ<strong>è§£å†³ä¹‹å‰å›è°ƒåœ°ç‹±çš„éš¾é¢˜</strong>ğŸ‘ã€‚</p><h3 id="promise-all" tabindex="-1">Promise.all() <a class="header-anchor" href="#promise-all" aria-hidden="true">#</a></h3><p><code>Promise.all()</code>é™æ€æ–¹æ³•åˆ›å»ºçš„æœŸçº¦ä¼šåœ¨<strong>ä¸€ç»„æœŸçº¦å…¨éƒ¨è§£å†³ä¹‹åå†è§£å†³</strong>ã€‚è¿™ä¸ªé™æ€æ–¹æ³•æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼Œè¿”å›ä¸€ä¸ªæ–°æœŸçº¦ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ä¼šé€šè¿‡ Promise.resolve()è½¬æ¢ä¸ºæœŸçº¦</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç©ºçš„å¯è¿­ä»£å¯¹è±¡ç­‰ä»·äº Promise.resolve()</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªåŒ…å«çš„æœŸçº¦<strong>å¾…å®š</strong>ï¼Œåˆ™åˆæˆçš„æœŸçº¦ä¹Ÿä¼š<strong>å¾…å®š</strong>ã€‚å¦‚æœæœ‰ä¸€ä¸ªåŒ…å«çš„æœŸçº¦<strong>æ‹’ç»</strong>ï¼Œåˆ™åˆæˆçš„æœŸçº¦ä¹Ÿä¼š<strong>æ‹’ç»</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æ°¸è¿œå¾…å®š</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p1)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;pending&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¸€æ¬¡æ‹’ç»ä¼šå¯¼è‡´æœ€ç»ˆæœŸçº¦æ‹’ç»</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Promise &lt;rejected&gt;</span></span>
<span class="line"></span></code></pre></div><p>â—ï¸ <strong>æ³¨æ„ï¼š</strong> å¦‚æœæœ‰æœŸçº¦æ‹’ç»ï¼Œåˆ™ <strong>ç¬¬ä¸€ä¸ªæ‹’ç»çš„æœŸçº¦</strong> ä¼šå°†è‡ªå·±çš„ç†ç”±ä½œä¸ºåˆæˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚ä¹‹åå†æ‹’ç»çš„æœŸçº¦ä¸ä¼šå½±å“æœ€ç»ˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚<strong>ä¸è¿‡ï¼Œè¿™å¹¶ä¸å½±å“æ‰€æœ‰åŒ…å«æœŸçº¦æ­£å¸¸çš„æ‹’ç»æ“ä½œã€‚</strong> åˆæˆçš„æœŸçº¦ä¼šé™é»˜å¤„ç†<strong>æ‰€æœ‰</strong>åŒ…å«æœŸçº¦çš„<strong>æ‹’ç»æ“ä½œ</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// è™½ç„¶åªæœ‰ç¬¬ä¸€ä¸ªæœŸçº¦çš„æ‹’ç»ç†ç”±ä¼šè¿›å…¥</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‹’ç»å¤„ç†ç¨‹åºï¼Œç¬¬äºŒä¸ªæœŸçº¦çš„æ‹’ç»ä¹Ÿ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¼šè¢«é™é»˜å¤„ç†ï¼Œä¸ä¼šæœ‰é”™è¯¯è·‘æ‰</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reject</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(reject</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">reason</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> reason))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰æœªå¤„ç†çš„é”™è¯¯</span></span>
<span class="line"></span></code></pre></div><h3 id="promise-race" tabindex="-1">Promise.race() <a class="header-anchor" href="#promise-race" aria-hidden="true">#</a></h3><p><code>Promise.race()</code>é™æ€æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…è£…æœŸçº¦ï¼Œæ˜¯ä¸€ç»„é›†åˆä¸­<strong>æœ€å…ˆè§£å†³æˆ–æ‹’ç»</strong>çš„æœŸçº¦ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼Œè¿”å›ä¸€ä¸ªæ–°æœŸçº¦ã€‚</p><p>å¦‚æœæœ‰ä¸€ä¸ªæœŸçº¦æ‹’ç»ï¼Œåªè¦å®ƒæ˜¯ç¬¬ä¸€ä¸ªè½å®šçš„ï¼Œå°±ä¼šæˆä¸ºæ‹’ç»åˆæˆæœŸçº¦çš„ç†ç”±ã€‚ä¹‹åå†æ‹’ç»çš„æœŸçº¦ä¸ä¼šå½±å“æœ€ç»ˆæœŸçº¦çš„æ‹’ç»ç†ç”±ã€‚ä¸è¿‡ï¼Œè¿™å¹¶ä¸å½±å“æ‰€æœ‰åŒ…å«æœŸçº¦æ­£å¸¸çš„æ‹’ç»æ“ä½œã€‚<strong>ä¸ <code>Promise.all()</code> ç±»ä¼¼ï¼Œåˆæˆçš„æœŸçº¦ä¼šé™é»˜å¤„ç†æ‰€æœ‰åŒ…å«æœŸçº¦çš„æ‹’ç»æ“ä½œ</strong>ã€‚</p><h2 id="æœŸçº¦æ‰©å±•" tabindex="-1">æœŸçº¦æ‰©å±• <a class="header-anchor" href="#æœŸçº¦æ‰©å±•" aria-hidden="true">#</a></h2><p>æ„Ÿè§‰ç”¨çš„ä¸å¤šï¼Ÿå…ˆæŒ–ä¸ªå‘ ğŸ˜˜ã€‚</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-e57f94bd data-v-dd31fca0><div class="edit-info" data-v-dd31fca0><div class="edit-link" data-v-dd31fca0><a class="VPLink link edit-link-button" href="https://github.com/zhaoyuuu/blog/tree/master/docs/gemstone/Chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°/promise.md" target="_blank" rel="noreferrer" data-v-dd31fca0 data-v-84239154><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-dd31fca0><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><div class="last-updated" data-v-dd31fca0><p class="VPLastUpdated" data-v-dd31fca0 data-v-94a32d5a>Last updated: <time datetime="2023-02-26T05:47:24.000Z" data-v-94a32d5a></time></p></div></div><div class="prev-next" data-v-dd31fca0><div class="pager" data-v-dd31fca0><a class="pager-link prev" href="/blog/gemstone/Chapter%2010%20%E5%87%BD%E6%95%B0/function.html" data-v-dd31fca0><span class="desc" data-v-dd31fca0>Previous page</span><span class="title" data-v-dd31fca0>function</span></a></div><div class="has-prev pager" data-v-dd31fca0><a class="pager-link next" href="/blog/gemstone/Chapter%2011%20%E6%9C%9F%E7%BA%A6%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0/async&amp;await.html" data-v-dd31fca0><span class="desc" data-v-dd31fca0>Next page</span><span class="title" data-v-dd31fca0>async & await</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"essays_intro.md\":\"be610261\",\"about_me.md\":\"3b8f19f5\",\"gemstone_chapter 10 å‡½æ•°_function.md\":\"23ab91c6\",\"assets_emoji.md\":\"99ac3920\",\"essays_youth_camp_violet-design.md\":\"a3018c33\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_object.md\":\"a15c3530\",\"essays_youth_camp_webpack.md\":\"6b5f9137\",\"handwritten_new.md\":\"cb9e6155\",\"handwritten_call.md\":\"0c33f59f\",\"handwritten_bind.md\":\"562d5072\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_map.md\":\"0811c795\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_weakset.md\":\"27b0bfd7\",\"handwritten_intro.md\":\"2283bd0e\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_set.md\":\"e25825a5\",\"gemstone_intro.md\":\"2296ab83\",\"guide.md\":\"4e0ea623\",\"gemstone_chapter 4 å˜é‡ã€ä½œç”¨åŸŸä¸å†…å­˜_ä¼ é€’å‚æ•°.md\":\"a5412ce9\",\"gemstone_chapter 4 å˜é‡ã€ä½œç”¨åŸŸä¸å†…å­˜_æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸé“¾.md\":\"ac9500b9\",\"gemstone_chapter 8 å¯¹è±¡ã€ç±»ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹_create_object.md\":\"32c100f2\",\"gemstone_chapter 12 bom_window.md\":\"e470a1b7\",\"handwritten_apply.md\":\"74bb58fe\",\"handwritten_deepclone.md\":\"5f19cbae\",\"index.md\":\"deffbbf0\",\"gemstone_chapter 12 bom_navigator.md\":\"7401ce87\",\"handwritten_sort.md\":\"f07fc377\",\"handwritten_ajax.md\":\"e408ada5\",\"handwritten_setinterval(settimeout).md\":\"fc4d0ffb\",\"gemstone_chapter 8 å¯¹è±¡ã€ç±»ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹_understand_object.md\":\"0ac31625\",\"handwritten_throttle.md\":\"8e038abe\",\"gemstone_chapter 12 bom_location.md\":\"487d7e0e\",\"gemstone_chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°_async_await.md\":\"c10dac5b\",\"handwritten_debounce.md\":\"9413c93b\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_array.md\":\"a9fcde05\",\"handwritten_promise_collection.md\":\"a9efe81b\",\"handwritten_instanceof.md\":\"70ceea45\",\"gemstone_chapter 11 æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°_promise.md\":\"9493b063\",\"gemstone_chapter 6 é›†åˆå¼•ç”¨ç±»å‹_weakmap.md\":\"4e56390c\",\"gemstone_chapter 8 å¯¹è±¡ã€ç±»ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹_class.md\":\"71722967\",\"gemstone_chapter 4 å˜é‡ã€ä½œç”¨åŸŸä¸å†…å­˜_åƒåœ¾å›æ”¶.md\":\"86580e9b\",\"gemstone_chapter 8 å¯¹è±¡ã€ç±»ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹_inherit.md\":\"a0841c80\",\"handwritten_object.md\":\"6e546ba5\",\"handwritten_array_collection.md\":\"6ce4fd04\"}")</script>
    <script type="module" async src="/blog/assets/app.cebf1889.js"></script>
    
  </body>
</html>